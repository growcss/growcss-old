<link rel="import" href="../../polymer/polymer.html"><link rel="import" href="../screen-size-behavior/screen-size-behavior.html"><link rel="import" href="../grid-container/grid-container.html"><link rel="import" href="../grid-flex/grid-flex.html"><link rel="import" href="gc-ui-tab.html"><!--
    <gc-ui-tabs>`element <text>.

    Example:
        <gc-ui-tabs></gc-ui-tabs>

    @element gc-ui-tabs
    @demo demo/index.html
--><dom-module id="gc-ui-tabs"><template><style>:host(:after){content:"";display:block;clear:both}
      :host{display:block}:host.mode-accordion .tabs{visibility:hidden;overflow:hidden;height:1px}:host.mode-accordion ::content .accordion-navigation{display:block;width:100%}:host.mode-accordion-vertical ::content .tabs{display:block;float:left;width:25%;max-width:25%}:host.mode-accordion-vertical ::content .tabs dd{display:block}:host.mode-accordion-vertical ::content gc-ui-tab.active{width:75%;max-width:75%;height:100%;padding:0;display:block;float:left}:host ::content .tabs{margin:auto}:host ::content .accordion-navigation>span,:host ::content .tabs>dd>span{padding:.75rem 1.5rem;cursor:pointer;position:relative;display:block}:host ::content .tabs>dd{display:inline-block;margin-left:0}:host ::content .accordion-navigation{display:none}:host ::content .accordion-navigation>span,:host.mode-accordion ::content .accordion-navigation,:host.mode-accordion-vertical ::content .accordion-navigation{display:block}:host.mode-accordion ::content .accordion-navigation>span:after{content:"+";text-align:center;width:2em;display:block;float:right}:host.mode-accordion ::content .accordion-navigation.active>span:after{content:"-"}:host.mode-thumbnail ::content .tabs>grid-flex-col{cursor:pointer}:host.mode-thumbnail ::content .tabs>grid-flex-col>img{display:block;width:100%}@media only screen and (min-width:60.0625em){:host.mode-thumbnail ::content gc-ui-tab{padding:1.5rem .75rem}}@media only screen and (min-width:80.0625em){:host.mode-thumbnail ::content gc-ui-tab{padding:1.5rem 1.125rem}}@media only screen and (min-width:100.0625em){:host.mode-thumbnail ::content gc-ui-tab{padding:1.5rem}}@media only screen and (min-width:120.0625em){:host.mode-thumbnail ::content gc-ui-tab{padding:1.5rem 1.875rem}}</style><template is="dom-if" if="{{_default}}"><grid-container><grid-flex><grid-flex-col><dl id="tabs" class="tabs"></dl><content></content></grid-flex-col></grid-flex></grid-container></template><template is="dom-if" if="{{_thumbnailTabs}}"><grid-container><grid-flex><grid-flex-col><grid-flex id="tabs" class="tabs"></grid-flex><content></content></grid-flex-col></grid-flex></grid-container></template><template is="dom-if" if="{{fullwidth}}"><dl id="tabs" class="tabs"></dl><content></content></template></template><script>"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),GcTabs=function(){function a(){_classCallCheck(this,a)}return _createClass(a,[{key:"beforeRegister",value:function(){this.is="gc-ui-tabs",this.properties={active:Number,fullwidth:{type:Boolean,value:!1},mode:String,_default:Boolean,_thumbnailTabs:{type:Boolean,value:!1}},this.listeners={"iron-resize":"_handleResize"}}},{key:"registered",value:function(){this.accordionmode=!1}},{key:"ready",value:function(){var a=this;"thumbnail"===this.mode?this._thumbnailTabs="thumbnail"===this.mode:this._default=!this.fullwidth,this.classList.add("mode-tab"),this.async(function(){"thumbnail"===a.mode?a.$$("#tabs").innerHTML=a._createFlexTabsList():a.$$("#tabs").innerHTML=a._createTabsList(),"vertical"!==a.mode&&a._createAccordionNavigation(),"thumbnail"!==a.mode&&a._setActiveTab(),a._clickHandler(),a._handleResize()},50)}},{key:"attributChanged",value:function(){this.ready()}},{key:"_handleResize",value:function(){if("accordion"===this.mode)return void this._changeToAccordionMode();if("vertical"===this.mode)return void this._changeToVerticalAccordionMode();if("thumbnail"===this.mode)return void(window.innerWidth<=960?this._changeToAccordionMode():this._changeToThumbnailTabMode());for(var a=this.querySelectorAll("#tabs dd"),b=0,c=0;c<a.length;c++)b+=a[c].offsetWidth+2;null!==this.$$("#tabs")&&(this.$$("#tabs").offsetWidth<b?this._changeToAccordionMode():this._changeToTabMode())}},{key:"_changeToTabMode",value:function(){this.accordionmode&&(this.classList.remove("mode-accordion"),this.classList.add("mode-tab"),this.accordionmode=!1)}},{key:"_changeToAccordionMode",value:function(){this.accordionmode||(this.classList.add("mode-accordion"),"thumbnail"===this.mode?(this.classList.remove("mode-thumbnail"),this.classList.remove("mode-tab")):this.classList.remove("mode-tab"),this.accordionmode=!0)}},{key:"_changeToVerticalAccordionMode",value:function(){this.classList.add("mode-accordion-vertical"),this.classList.remove("mode-tab")}},{key:"_changeToThumbnailTabMode",value:function(){this.classList.add("mode-thumbnail"),this.accordionmode&&(this.classList.remove("mode-accordion"),this.accordionmode=!1)}},{key:"_createTabsList",value:function(){for(var a="",b=0,c=this.querySelectorAll("gc-ui-tab");b<c.length;b++){var d=c[b].getAttribute("title");a+='<dd data-index="'+b+'"><span>'+d+"</span></dd>"}return a}},{key:"_createFlexTabsList",value:function(){for(var a="",b=0,c=this.querySelectorAll("gc-ui-tab"),d=this._createImages(),e=c.length;e>b;b++){var f=c[b].getAttribute("title");a+='<grid-flex-col class="small-'+(e+1)+'" data-index="'+b+'"><span>'+f+"</span> "+d[b]+"</grid-flex-col>"}return a}},{key:"_createImages",value:function(){for(var a=0,b=[],c=this.querySelectorAll("gc-ui-tab");a<c.length;a++){var d=c[a].getAttribute("thumbnail"),e=c[a].getAttribute("title");b.push('<img src="'+d+'" alt="'+e+'"/>')}return b}},{key:"_createAccordionNavigation",value:function(){for(var a=0,b=this.querySelectorAll("gc-ui-tab");a<b.length;a++){var c=b[a].getAttribute("title"),d=document.createElement("div"),e=document.createElement("span"),f=document.createTextNode(c);d.setAttribute("class","accordion-navigation"),d.setAttribute("data-index",a),e.appendChild(f),d.appendChild(e),this.$$("#tabs").parentNode.insertBefore(d,b[a])}}},{key:"_activeTabAndContent",value:function(a){for(var b=this.querySelectorAll("gc-ui-tab"),c=this._getTabs(),d=this.querySelectorAll(".accordion-navigation"),e=0;e<b.length;e++)c[e].classList.remove("active"),"vertical"!==this.mode&&d[e].classList.remove("active"),"thumbnail"===this.mode&&c[e].querySelector("img").setAttribute("style","display: none"),b[e].classList.remove("active");c[a].classList.add("active"),"vertical"!==this.mode&&d[a].classList.add("active"),b[a].classList.add("active"),this.classList.remove("has-no-active")}},{key:"_clickHandler",value:function(){for(var a=this,b=this._getTabs(),c=this.querySelectorAll(".accordion-navigation"),d=0;d<b.length;d++)b[d].addEventListener("click",function(b){a._activeTabAndContent(b.currentTarget.getAttribute("data-index"))}),"vertical"!==this.mode&&c[d].addEventListener("click",function(b){a._activeTabAndContent(b.currentTarget.getAttribute("data-index"))})}},{key:"_setActiveTab",value:function(){var a=this._getInitialActiveTab();a?this._activeTabAndContent(a-1):this.classList.add("has-no-active")}},{key:"_getInitialActiveTab",value:function(){var a=this.active;return"undefined"==typeof a?1:parseInt(a,10)}},{key:"_getTabs",value:function(){return"thumbnail"===this.mode?this.querySelectorAll("#tabs grid-flex-col"):this.querySelectorAll("#tabs dd")}},{key:"behaviors",get:function(){return[Polymer.IronResizableBehavior]}}]),a}();Polymer(GcTabs);</script></dom-module>