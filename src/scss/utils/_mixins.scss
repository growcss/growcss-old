@charset "UTF-8";
// Sass Mixins
// - - - - - - - - - - - - - - - - - - - - - - - - -

// Adds margin to the element.
//
// @param {list} $margin [flex-gutter()] A list of margin value(s) to use.
//                                       Passing `default` in the list will result in using the gutter width as a margin value.
//
// @example scss - Usage
//  .element {
//    @include marg(30px -20px 10px default);
//  }
//
// @example css - CSS Output
//  .element {
//    margin: 30px -20px 10px 2.35765%;
//  }
// - - - - - - - - - - - - - - - - - - - - - - - - -
@mixin marg($margin: flex-gutter()) {
  $margin-list: null;

  @each $value in $margin {
    $value: if($value == 'default', flex-gutter(), $value);
    $margin-list: join($margin-list, $value);
  }

  margin: $margin-list;
}

// Module export mixin
// This mixin helps making sure a module is imported once and only once.
//
// @access public
//
// @param $name {string} Name of exported module
// - - - - - - - - - - - - - - - - - - - - - - - - -
@mixin exports($name) {
  @if (index($imported-modules, $name) == null) {
    $imported-modules: append($imported-modules, $name) !global;
    @content;
  } @else if (index($imported-modules, $name) == false) {

  } @else {
    @warn "Module `#{$name}` has already been imported.";
  }
}

// For creating container, nested, and collapsed rows.
//
// @param {boolean|string} $display Any special behavior for this row? Default: false. Options: block, table, flex.
// - - - - - - - - - - - - - - - - - - - - - - - - -
@mixin build-row($display: false) {
  @if $display == block {
    @include row();
    overflow: hidden;
    padding-left: 0;
  } @else if $display == table {
    @include row(table);
    @include row-childs-padding();
    overflow: hidden;
  } @else if $display == flex {
    @include display(flex);
    @include flex-direction(row);
  } @else {
    @include row();
  }

  // Clearfix for all rows
  @include clearfix();
  margin: auto;
  max-width: config-get("breakpoint.xlarge");
}

@mixin row-childs-padding($display: false) {
  // Select all child elements of .row recursively
  * {
    @include pad(0 default 0 default);
    position: relative;
    @if $display == block {
      list-style: none;
    }
  }
}

// Responsive grid mixin
//
// @param {boolean|string} $grid
// - - - - - - - - - - - - - - - - - - - - - - - - -
@mixin build-grid($grid: false) {
  @include build-columns('tiny', $grid);

  @each $name, $width in $breakpoints {
    @if $width != "tiny" and $name != "tiny" {
      @include media('>#{$width}') {
        @include build-columns($name, $grid);
      }
    }
  }
}

@mixin build-columns($name, $grid: false) {
  // $grid-columns is a neat.bourbon.io variable
  @for $i from 1 through $grid-columns {
    @if $grid == block {
      &[data-#{$name}="#{$i}"] > * {
        @if $i > 1 {
          @include span-columns($i - 1);
          @include omega(#{$i}n);
        } @else {
          @include span-columns($i);
        }
      }
    } @else if $grid == flex {
      .#{$name}-#{$i} {
        @include flex(1);
      }
    } @else if $grid == table {
      @include build-pull-push($name, $i);
      .#{$name}-#{$i} {
        @include span-columns($i, table);
      }
    } @else {
      @include build-pull-push($name, $i);
      // span-columns() is a neat.bourbon.io function to generate grid width
      .#{$name}-#{$i} {
        @include span-columns($i of $grid-columns);
        &:last-child {
          @include omega();
        }
      }
    }
  }
}

@mixin build-pull-push($name, $i) {
  .#{$name}-push-#{$i} {
    @include shift($i);
  }

  .#{$name}-pull-#{$i} {
    @include shift(-$i);
  }
}

@mixin debug($type: false) {
  @if config-get("debug.breakpoint") and $type == breakpoint and config-get("debug.grid") == false {
    body:before {
      @include fill-parent;
      background: $red-500;
      content: "tiny #{config-get("size.tiny")}";
      color: $white;
      text-align: center;
      display: block;
      height: rem(50);
      line-height: rem(50);
    }

    body {
      @include media(">small") {
        &:before {
          background: $pink-500;
          content: "Small #{config-get("size.small")}";
        }
      }

      @include media(">medium") {
        &:before {
          background: $purple-500;
          content: "medium #{config-get("size.medium")}";
        }
      }

      @include media(">large") {
        &:before {
          background: $deep-purple-500;
          content: "Large #{config-get("size.large")}";
        }
      }

      @include media(">xlarge") {
        &:before {
          background: $indigo-500;
          content: "xLarge #{config-get("size.xlarge")}";
        }
      }
    }
  }
}
